---
title: Ленивая загрузка плагинов в GramIO - Асинхронная загрузка плагинов

head:
    - - meta
      - name: "description"
        content: Узнайте, как использовать ленивую (асинхронную) загрузку плагинов в GramIO и избежать типичных проблем с порядком инициализации плагинов.

    - - meta
      - name: "keywords"
        content: телеграм бот, фреймворк, как создать бота, Telegram, Telegram Bot API, GramIO, TypeScript, JavaScript, Node.JS, Nodejs, Deno, Bun, ленивая загрузка, асинхронные плагины, плагины GramIO, await для плагинов, порядок загрузки плагинов, инициализация плагинов, autoload, динамическая загрузка, расширение функциональности бота
---

# Ленивая загрузка плагинов

Плагины могут быть **лениво загружены**, если они находятся в **асинхронной** функции. Такие плагины всегда подключаются в самый **последний** момент (во время вызова **.start**). Если вы хотите вызвать их **раньше**, поставьте перед ними **await**.

## Пример

```ts
const bot = new Bot(process.env.BOT_TOKEN as string)
    .extend(autoload()) // autoload асинхронный
    .command("start", () => {
        // эта команда регистрируется ДО загрузки autoload
    });

bot.start(); // autoload загружается здесь
```

Вы можете исправить это с помощью **await**.

```ts
const bot = new Bot(process.env.BOT_TOKEN as string)
    .extend(await autoload()) // autoload асинхронный, но мы используем await
    .command("start", () => {
        // эта команда регистрируется ПОСЛЕ загрузки autoload
    });

bot.start();
```

теперь это работает как ожидалось! 